---
title: Salesforce Marketing Cloud Event Streaming
description: Send Amplitude events to Marketing Cloud automatically with just a few clicks.
---

!!!beta

    This feature is in Closed Beta and is in active development. Contact your Amplitude support team for support with this integration.

## About Salesforce Marketing Cloud

Salesforce Marketing Cloud provides marketing engagement automation that allows you to engage your users. Using this integration enables your marketing and growth teams to use behavioral data to better target campaigns and increase user engagement.

## Considerations

Keep these things in mind when sending events to [Salesforce Marketing Cloud](https://www.salesforce.com/content/dam/web/en_us/www/documents/pricing/mc_email_journey_pricing_sheet.pdf):

- You must enable this integration in each Amplitude project you want to use it in.
- There are relevant limits for Salesforce Marketing Cloud events:
- Salesforce suggests not using more than 2500 calls per minutes when interacting with the REST API
- Yearly limit on API call
    - Basic: 0 calls/year
    - Pro: 2M calls/year
    - Corporate: 6M calls/year
    - Enterprise: 200M calls/year
  
## Setup

### Salesforce Marketing Cloud setup

You need a Client ID, Client Secret and Subdomain from Salesforce Marketing Cloud.

1. In Salesforce Marketing Cloud, navigate to **Setup** under Settings.
2. In the Quick Find box, search for **Installed Packages**.
3. Click **New** to create a new package.
4. Click **Add Component**.
5. For the Component Type, select **API Integration**. This step generates the API integration information that is required in Amplitude.
6. For the integration type, select **Server-to-Server**.
7. Grant the package these permissions:
    - Email: Read, Write
    - Web: Read, Write
    - Automations: Read, Write, Execute
    - Journeys: Read
    - List and Subscribers: Read, Write
    - Tracking Events: Read
    - Webhooks: Read, Write
8. **Save** the package.
9. Copy the **Client ID**, **Client Secret**, and **Subdomain** from the app you want to integrate.

    - For the Subdomain, see the Authentication Base URI and only copy the subdomain. e.g. If the Authentication Base URL is "https://mc1n78yx33kxv5mv1q7fh81flfjq.auth.marketingcloudapis.com/", then only copy "mc1n78yx33kxv5mv1q7fh81flfjq".
    ![screenshot of the SFMC workflow](../../assets/images/SFMC-v2-credentials.png)

10. Click on the **Access** tab and click on **Enable All Business Units**.

### Amplitude setup

1. In Amplitude Data, click **Catalog** and select the **Destinations** tab.
2. In the Event Streaming section, click **Salesforce Marketing Cloud**.
3. Enter a sync name, then click **Create Sync**.
4. Enter your **Client ID** / **Client Secret** / **Subdomain** created by SFMC.
5. Enter your **Event Definition Key** generated by API Event in SFMC in the **SFMC Event Definition Key** field.
6. Enter the External Key generated by the Data Extension for the user properties in SFMC to SFMC User Data Extension Key. 
7. Click on **Map properties to destination** to specify the identity mapping between Amplitude and SFMC. Note that SFMC requires the **Contact Key** and **Email** as properties.
8. Toggle the **Send Events** filter to select the events to send. SFMC recommends choosing the events that are most important to your use case.
9. Click on the **Select & filter events** option to choose the event type of the events you would like to send.
10. (optional) In **Select additional properties**, select any more event properties you want to send to SFMC.
11. Under **Send Users**, make sure the toggle is enabled ("Users are sent to SFMC") if you want to stream users and their properties to SFMC. By default, it sends the **Contact key** & **Email address** to SFMC.
12. (optional) In **Select additional properties**, select any more user properties you want to send to SFMC. If you don't select any properties here, Amplitude doesn't send any.

## Event forwarding setup (Optional)

!!!note "Storing data in a different Data Extension in SFMC"

    Following these steps will enable you to create a Data Extension in Salesforce Marketing Cloud, set up an Event Definition, and configure the necessary mappings for forwarding events to Amplitude. You will have to go through these steps again if you do not want to store data in the same Data Extension. 

1. In Salesforce Marketing Cloud, navigate to **Email Studio** from the top navigation bar.
2. Find the **Data Extension** section from the **Subscribers**.
3. Create a Data Extension in any folder.
4. (Recommendation) When you create a new Data Extension for event forwarding, use a template. Choose **Create from Template** in the Creation Method.
![screenshot of the SFMC workflow](../../assets/images/SFMC-event-forwarding-create-de.png)
5. Choose **TriggeredSendDataExtension** as the template.
![screenshot of the SFMC workflow](../../assets/images/SFMC-event-forwarding-template.png)
6. Make sure your **Data Extension** includes the columns **SubscriberKey** (to be used as Contact key) and **EmailAddress** (to be used as Email) for mapping properties in Amplitude's setup page.
![screenshot of the SFMC workflow](../../assets/images/SFMC-event-forwarding-de-column.png)
7. For any additional columns you create (except SubscriberKey and EmailAddress), ensure their names match the properties you select in Amplitude's additional properties.
    - By default, the event properties include **event_type** / **event_time** / **SubscriberKey** / **EmailAddress**.
8. After you created the Data Extension, go to **Journey Builder** and find **Event Sources** under the **Event** tab.
9. Click on **New Event** and select **API Event** for **New Entry Sources**.
![screenshot of the SFMC workflow](../../assets/images/SFMC-event-forwarding-api-event.png)
10. Name your Event Definition and select the **Data Extension** you created.
11. You can optionally create contact filters, which can be applied later.
12. Copy the **Event Definition Key** and paste it into the **SFMC Event Definition Key** in Amplitude’s setup page.
13. You are now ready to start forwarding the events.

## Identify forwarding setup (Optional)

!!!note "Send other user properties than the default attributes in SFMC"

    You will have to define the Data Extension in SFMC to store the user properties that do not exist in the default attributes in SFMC. Default attribute set includes Contact Key and Email Address.

1. To add your own attribute set, start by defining a **Data Extension** in SFMC.
2. When creating the **Data Extension**, follow the specified naming format for **Event Forwarding**.
3. Include a **contactKey** column in the **Data Extension** to map attributes to each contact in SFMC.
![screenshot of the SFMC workflow](../../assets/images/SFMC-identify-forwarding-de.png)
**Note**: Make sure that the contactKey column is set as a primary key.
4. After creating the **Data Extension**, navigate to the **Data Designer** tab in Contact Builder.
![screenshot of the SFMC workflow](../../assets/images/SFMC-identify-forwarding-dd.png)
5. Choose an **Attribute Group** and click on the **Data Extensions** button, then select **Link**.
![screenshot of the SFMC workflow](../../assets/images/SFMC-identify-forwarding-link-de.png)
6. Select your **Data Extension** and choose the column that maps to the **Customer Data attribute**. It is recommended to map the "contactKey" attribute to Contact Key in the Customer Data section.
![screenshot of the SFMC workflow](../../assets/images/SFMC-identify-forwarding-link-contact.png)
7. After you save, copy & paste the external key of the Data Extension into the **SFMC User Data Extension Key** in the setup UI of Amplitude.
8. You are ready to send user properties! Your Data Extension is created and linked to the Attribute Group in Contact Builder, enabling you to store and utilize the attribute set for each contact in SFMC.
![screenshot of the SFMC workflow](../../assets/images/SFMC-identify-forwarding-result.png)

## Use Cases

1. **Campaign Automation**: Marketing Cloud’s Journey Builder is a campaign planning tool that enables you to design and automate campaigns that guide customers through their journey with a brand. Its foundation is the journey, which is the communication plan you design. Our events streaming will enable your Journey to be induced.
2. **Personalized Marketing**: With the ability to track user behavior and capture user and event properties in Amplitude, you can build personalized contents and targeted marketing campaigns in Marketing Cloud. This can lead to increased engagement and customer loyalty.
